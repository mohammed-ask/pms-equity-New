$(document).ready(function() {

	$('.only_price').keypress(function (event) {

		return isNumber(event, this)

	});

	$('.only_contact').keypress(function (event) {

		return iscontact(event, this)

	});

});

function isNumber(evt, element) 

{

	var charCode = (evt.which) ? evt.which : event.keyCode



	if (

				(charCode != 45 || $(element).val().indexOf('-') != -1) &&      // “-” CHECK MINUS, AND ONLY ONE.

				(charCode != 46 || $(element).val().indexOf('.') != -1) &&      // “.” CHECK DOT, AND ONLY ONE.

				(charCode < 48 || charCode > 57))

		return false;

	return true;

} 

function iscontact(evt, element) 

{

	var charCode = (evt.which) ? evt.which : event.keyCode

	if (

				(charCode != 45 || $(element).val().indexOf('-') != -1) &&      // “-” CHECK MINUS, AND ONLY ONE.

				(charCode != 45 ||  $(element).val().indexOf('.') != -1) &&      // “.” CHECK DOT, AND ONLY ONE.

				(charCode < 48 || charCode > 57))

		return false;

	return true;

} 

$('.developer_submit_save').submit(function(e) {   

	e.preventDefault();

	var form = $(this);

	let url = form.attr('action');



	if (form.parsley().validate()) {

		ajax_submit(form,function(response){ 

			if(response.status_code == 200){

				if(response.redirect_url!=''){

					//console.log(response)

					setTimeout(function(){  alert(response.redirect_url)             

						window.location=response.redirect_url;

					}, 500);

				}

				show_msg(response.data_param,response.status_code);

				$('.developer_submit_save').trigger("reset");

			}else{  

					show_msg(response.data_param,response.status_code);

				}

			});

	}

});

/**/

function ajax_submit(form_obj,callback)

{

	$.ajax({

		url: form_obj.attr('action'),

		type: "POST",

		dataType: "JSON",

		data: form_obj.serialize(),

		success : function(response){

			callback(response);

		},

		error:function(response){ 

			if(is_function('remove_loader')){

				remove_loader('');

			}

		}

	}) 

}



function show_msg(hdnParam,errorCode)

{
	if(errorCode == '900'){
		var myId = 'captcha_error';
	}
	
	if(hdnParam == 'contactus'){

		if(errorCode == '200' ){

			var myId = 'contact_success';
			grecaptcha.reset();
		}else if(errorCode == '400'){

			var myId = 'contact_error';

		}

	}else if(hdnParam == 'subscribe'){

		if(errorCode == '200' ){

			var myId = 'subscribe_success';

		}else if(errorCode == '400'){

			var myId = 'subscribe_error';

		}

	}else if(hdnParam == 'serviceDetail'){

		if(errorCode == '200' ){

			var myId = 'sd_success';
			grecaptcha.reset();

		}else if(errorCode == '400'){

			var myId = 'sd_error';

		}

	}else if(hdnParam == 'indexPopUp'){

		if(errorCode == '200' ){

			var myId = 'popup_success';
			grecaptcha.reset();

		}else if(errorCode == '400'){

			var myId = 'popup_error';

		}

	}else if(hdnParam == 'sent_bank_detail'){

		if(errorCode == '200' ){

			var myId = 'bd_sent_success';

		}else if(errorCode == '400'){

			var myId = 'bd_sent_error';

		}

	}

	$("#"+myId).show();

	setTimeout(function() {

		$("#"+myId).fadeOut('slow');

	

	}, 2000);

}



